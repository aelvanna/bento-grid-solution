//===========================================
// Configuration
//===========================================
@use "variables" as *;
@use "mixins";
@use "_fonts.scss";

//===========================================
// Styling
//===========================================

*,
*::before,
*::after {
  box-sizing: border-box;
  // Reset Margins/Padding
  margin: 0;
  padding: 0;
}

html {
  background: $grey-100;
  font-size: $fs-base;
  line-height: 1;
  letter-spacing: -0.05rem;
  // Set Fluid Font-size //
  font-size: clamp($space-sm, 0.9rem + 1vw, $fs-base);
  font-family: "DM Sans", sans-serif;
  // Allow long words to break to prevent horizontal overflow
}

body {
  min-height: 100vh;
}

// Font Configuration
p {
  font-size: $fs-base;
  font-weight: 400;
}

h1 {
  font-size: $fs-h1;
  font-weight: 500;
  margin-bottom: $space-md;

  @include mixins.breakpoint($breakpoint-laptop) {
    font-size: $fs-desktop-h1;
  }
}

h2 {
  font-size: $fs-h2;
  font-weight: 500;

  @include mixins.breakpoint($breakpoint-laptop) {
    font-size: $fs-desktop-h2;
    line-height: 0.9;
  }
}

figcaption {
  font-size: $fs-figcaption;
  font-weight: 500;

  @include mixins.breakpoint($breakpoint-laptop) {
    font-size: $fs-desktop-figcaption;
  }
}

// Make images responsive a default behaviour
img {
  max-width: 100%;
  height: auto;
  display: block;
  margin: 0;
}

// Page Styling

.container {
  // Mobile: Grid
  min-height: 100vh;
  // Use padding for consistent side gutters and margin for vertical spacing.
  padding-inline: $space-sm;
  margin-block: $space-lg;
  display: grid;
  grid-template-columns: 1fr;
  grid-template-rows: auto;
  gap: $space-lg;
  grid-template-areas:
    "testimonial"
    "platforms"
    "consistency"
    "schedule"
    "followers"
    "growth"
    "faster-content"
    "writing";

  // Apply desktop layout starting from the laptop breakpoint
  @include mixins.breakpoint($breakpoint-laptop) {
    max-width: 1200px;
    margin: 4rem auto 3rem;
    // Use minmax() for robust, flexible rows
    grid-template-rows:
      minmax(20rem, auto) minmax(3rem, auto) minmax(5rem, auto)
      minmax(11rem, auto);
    grid-template-columns: repeat(4, 1fr);
    gap: $space-md;
    grid-template-areas:
      "faster-content   testimonial   testimonial   schedule"
      "faster-content   platforms     consistency   schedule"
      "writing          platforms     consistency   schedule"
      "writing          growth        followers     followers";
  }

  @include mixins.breakpoint($breakpoint-desktop-4k) {
    place-content: center;
  }
}

// Base Layout
.testimonial-card {
  // Use mixin for consistent card styling
  @include mixins.card-theme($purple-500, $white);
  text-align: center;
  padding-inline: $space-lg;
  padding-block: $space-xl;
  // Prevents the figcaption from stretching the page on small screens
  overflow-x: hidden;
  // prevents card scrolling
  overflow-y: hidden;

  .yellow-text {
    color: $yellow-500;
    background-color: transparent;
  }

  &__figure {
    // Reset default browser margin
    margin: 0;
    @include mixins.flex-center(column);
    gap: $space-2xs;

    figcaption {
      font-weight: 200;
    }
  }

  .five-star-rating-img {
    max-width: 70%;
  }

  // Desktop Layout
  @include mixins.breakpoint($breakpoint-laptop) {
    display: flex;
    flex-direction: column;
    grid-area: testimonial;
    padding-block: $space-3xl;

    h1 {
      padding-inline: 1rem;
    }

    &__figure {
      // Pushes the figure to the bottom when the card stretches
      margin-top: auto;

      .five-star-rating-img {
        max-width: 40%;
      }

      figcaption {
        font-size: $fs-desktop-figcaption;
      }
    }
  }
}

.multiple-platform-card {
  display: flex;
  flex-direction: column;
  @include mixins.card-theme($white, $black, $padding: $space-sm);

  &__figure {
    margin: 0;
    display: flex;
    justify-content: flex-end;
    order: -1;

    .multiple-accounts-img {
      // Filter to add a very subtle shadow to helpmask
      // the faint purple edge artifacts on the image asset.
      filter: drop-shadow(0 2px 8px hsl(0 0% 0% / 0.15));
      margin-bottom: $space-xs;
      max-width: 100%;
    }
  }

  @include mixins.breakpoint($breakpoint-laptop) {
    grid-area: platforms;
    overflow: hidden;
    padding-top: $space-md;

    h2 {
      padding-left: $space-xs;
    }

    .multiple-accounts-img {
      // Nudge image to the right to create overflow effect
      max-width: 140%;
      transform: translateX(6rem);
      padding-bottom: $space-lg;
    }
  }
}

.consistent-posting-card {
  @include mixins.card-theme(
    $yellow-500,
    $black,
    $border-radius-base,
    $space-sm
  );

  // Reset padding-bottom to match design
  padding-bottom: 0;
  display: flex;
  flex-direction: column;
  // Allows image to be clipped
  overflow: hidden;

  h2 {
    text-align: left;
  }

  &__figure {
    margin: 0;
    // Pushes the figure to the bottom of the flex container.
    margin-top: auto;
    max-width: 80%;
    // Pushes the image down so it overflows the card and gets clipped.
    transform: translateY(1.3rem);
  }

  @include mixins.breakpoint($breakpoint-laptop) {
    grid-area: consistency;
    padding-top: $space-md;
    padding-inline: $space-md;

    &__figure {
      max-width: 100%;
      // move the image down so it can clip
      transform: translateY($space-sm);
    }
  }
}

.schedule-posts-card {
  @include mixins.card-theme(
    $purple-100,
    $black,
    $border-radius-base,
    $space-sm
  );

  padding-top: $space-lg;
  // Prevents the h2 from stretching the page on small screens
  overflow: hidden;

  @include mixins.flex-center(column);
  gap: $space-sm;
  text-align: center;

  h2 {
    white-space: nowrap;
    margin-bottom: $space-xs;
  }

  .schedule-posts-img {
    margin-bottom: $space-md;
  }

  figcaption {
    font-size: $fs-base;
    font-weight: 400;
    margin-block: $space-sm;
    // Centers figcaption to look like the mobile design
    margin-inline: $space-xs;
  }

  @include mixins.breakpoint($breakpoint-laptop) {
    grid-area: schedule;
    padding-top: $space-2xl;
    justify-content: flex-start;

    h2 {
      white-space: normal;
      text-align: left;
      margin-left: $space-2xs;
    }

    .schedule-posts-img {
      margin-left: $space-lg;
      max-width: 160%;
      transform: translateX(-1.3rem);
    }

    figcaption {
      text-align: left;
      // Reset Mobile Margins
      margin: 0;
      padding-inline: $space-2xs;
      padding-bottom: $space-2xs;
      // Reduce font size to shrink the card's total height, allowing the grid row to shrink.
      font-size: $fs-base;
    }
  }
}

.grow-followers-card {
  @include mixins.card-theme($purple-500, $white);
  @include mixins.flex-center(column);
  padding: $space-md $space-2xl;
  text-align: center;
  gap: $space-2xl;

  h2 {
    font-size: $fs-figcaption-2xl;
    font-weight: 500;
    order: 1;
  }

  @include mixins.breakpoint($breakpoint-laptop) {
    @include mixins.flex-center(row);
    grid-area: followers;
    // Add padding to the card to create space around its content.
    padding-left: $space-md;

    h2 {
      text-align: left;
      font-size: $fs-desktop-h2;
    }

    .grow-followers-img {
      max-width: 130%;
    }
  }
}

.increased-growth-card {
  @include mixins.card-theme($white, $black, $padding: $space-md);
  @include mixins.flex-center();

  &__figure {
    @include mixins.flex-center(column);
    gap: $space-xs;
    text-align: center;
  }

  &__percentage {
    font-size: $fs-h1;
    font-weight: 500;
  }

  figcaption {
    font-size: $fs-figcaption;
    font-weight: 400;
    margin-bottom: $space-sm;
  }

  @include mixins.breakpoint($breakpoint-laptop) {
    grid-area: growth;

    // Override the flex-center mixin to left-align the figure
    justify-content: flex-start;

    &__figure,
    .increased-growth-img {
      // Override the flex-center mixin to left-align the content
      align-items: flex-start;
      text-align: left;
    }
  }
}

.faster-content-creation-card {
  @include mixins.card-theme($yellow-100, $black, $padding: $space-md);
  display: flex;
  flex-direction: column;
  justify-content: space-between;

  .purple-text {
    color: $purple-500;
    font-style: italic;
  }

  h2 {
    margin-bottom: $space-md;
  }

  figure {
    // Pushes the figure to the bottom of the flex container
    margin-top: auto;
  }

  .faster-content-creation-img {
    max-width: 60%;
  }

  @include mixins.breakpoint($breakpoint-laptop) {
    grid-area: faster-content;
    text-align: left;
    // Reduce excessive padding to allow the grid row to shrink closer to the design's proportions.
    padding-block: $space-2xl 0;

    h2 {
      margin-bottom: $space-xs;
    }

    .faster-content-creation-img {
      max-width: 100%;
    }
  }
}

.write-content-card {
  // Mobile Layout
  @include mixins.card-theme($yellow-500, $black, $padding: $space-md);
  display: flex;
  flex-direction: column;

  h2 {
    margin-bottom: $space-md;
  }

  &__figure {
    // Pushes the figure to the bottom of the flex container, respecting parent padding
    margin-top: auto;
  }

  .write-content-img {
    max-width: 80%;
  }

  // Desktop Layout
  @include mixins.breakpoint($breakpoint-laptop) {
    grid-area: writing;
    text-align: left;
    padding-block: $space-md;

    h2 {
      max-width: 90%;
      margin-bottom: 0;
    }

    .write-content-img {
      max-width: 105%;
    }
  }
}

footer {
  // Mobile Layout
  .attribution {
    font-size: $fs-attribution;
    text-align: center;

    &__a {
      color: $link-color;
    }
  }

  // Desktop Layout
  @include mixins.breakpoint($breakpoint-laptop) {
    grid-area: footer;
  }
}
